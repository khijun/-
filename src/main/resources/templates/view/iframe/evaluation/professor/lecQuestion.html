<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>강의평가 결과</title>
  <style>
    .container {
      padding: 20px;
    }
    .lecture-select {
      margin-bottom: 20px;
    }
    .question-item {
      margin-bottom: 20px;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 5px;
    }
    .score {
      font-weight: bold;
      color: #2196F3;
    }
  </style>
</head>
<div class="container">
  <!-- 강의 선택 드롭다운 -->
  <div class="lecture-select">
    <h3>강의 선택</h3>
    <select onchange="if(this.value) location.href='/iframe/evaluation/professor/' + this.value">
      <option value="">강의를 선택하세요</option>
      <option th:each="lecture : ${lectures}"
              th:selected="${lecture.ofregistrationId == selectedOfregistrationId}"
              th:text="${lecture.lectureName + ' (' + lecture.semester + ')'}"
              th:value="${lecture.ofregistrationId}">
      </option>
    </select>
  </div>

  <!-- 강의가 선택되지 않았을 때 -->
  <div class="no-results" th:if="${!showResults}">
    <p>강의를 선택하면 평가 결과가 표시됩니다.</p>
  </div>

  <!-- 강의평가 결과 표시 (강의가 선택되었을 때만) -->
  <div class="evaluation-results" th:if="${showResults}">
    <div th:if="${not #lists.isEmpty(results)}">
      <h3>강의평가 결과</h3>
      <div th:each="result : ${results}">
        <h4 th:text="${result.questionName}">문항</h4>
        <p>평균 점수: <span th:text="${#numbers.formatDecimal(result.averageScore, 1, 1)}">0.0</span></p>
        <ul>
          <li>5점: <span th:text="${result.score5Count}">0</span>명
            (<span th:text="${#numbers.formatDecimal(result.score5Percent, 1, 1)}">0.0</span>%)</li>
          <li>4점: <span th:text="${result.score4Count}">0</span>명
            (<span th:text="${#numbers.formatDecimal(result.score4Percent, 1, 1)}">0.0</span>%)</li>
          <li>3점: <span th:text="${result.score3Count}">0</span>명
            (<span th:text="${#numbers.formatDecimal(result.score3Percent, 1, 1)}">0.0</span>%)</li>
          <li>2점: <span th:text="${result.score2Count}">0</span>명
            (<span th:text="${#numbers.formatDecimal(result.score2Percent, 1, 1)}">0.0</span>%)</li>
          <li>1점: <span th:text="${result.score1Count}">0</span>명
            (<span th:text="${#numbers.formatDecimal(result.score1Percent, 1, 1)}">0.0</span>%)</li>
        </ul>
      </div>
    </div>
    <div th:if="${#lists.isEmpty(results)}">
      <p>해당 강의의 평가 결과가 없습니다.</p>
    </div>
  </div>
</div>
</html>